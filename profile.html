<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeEmp Professional Profile | Lochness Group</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/contracts.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/profile-enhanced.css">
    <link rel="stylesheet" href="css/profile-verification.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <img src="images/lochness-logo.svg" alt="Lochness Group Logo">
                <span>Lochness Group</span>
            </div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#about">About</a>
                <a href="index.html#services">Services</a>
                <a href="index.html#technology">Technology</a>
                <a href="index.html#datalayer">DataLayer</a>
                <a href="index.html#enterprise">Enterprise</a>
                <a href="index.html#contracts">Contracts</a>
                <a href="profile.html" class="active">DeEmp Profile</a>
                <a href="index.html#contact">Contact</a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Profile Header -->
    <section class="hero parallax-section">
        <div class="parallax-bg" style="background-image: url('images/crypto-bg.jpg');"></div>
        <div class="container">
            <div class="profile-header">
                <div class="profile-avatar-container">
                    <div id="profile-avatar" class="profile-avatar">
                        <!-- Profile picture will be loaded dynamically -->
                    </div>
                </div>
                <div class="profile-info">
                    <h1 id="profile-name">Loading profile...</h1>
                    <div id="profile-title" class="profile-title"></div>
                    <div class="profile-did">
                        <span>Chia DID: </span>
                        <code id="profile-did-value"></code>
                    </div>
                    <div class="profile-actions">
                        <button id="verify-button" class="btn btn-secondary">
                            <i class="fas fa-check-circle"></i> Verify Credentials
                        </button>
                        <button id="contact-button" class="btn btn-primary">
                            <i class="fas fa-envelope"></i> Contact Professional
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="scroll-indicator">
            <span>Scroll Down</span>
            <i class="fas fa-chevron-down"></i>
        </div>
    </section>

    <!-- Profile Content -->
    <section class="profile-content">
        <div class="container">
            <div class="section-header">
                <h2>Professional Profile</h2>
                <div class="separator"></div>
            </div>
            <div class="profile-tabs">
                <button class="tab-button active" data-tab="overview">Overview</button>
                <button class="tab-button" data-tab="expertise">Expertise</button>
                <button class="tab-button" data-tab="experience">Experience</button>
                <button class="tab-button" data-tab="contracts">Smart Contracts</button>
            </div>

            <div class="tab-content">
                <!-- Overview Tab -->
                <div id="overview" class="tab-pane active">
                    <div class="overview-grid">
                        <div class="overview-summary">
                            <h3>Professional Summary</h3>
                            <p id="profile-summary">Loading summary information...</p>
                        </div>
                        <div class="overview-sidebar">
                            <div class="overview-card">
                                <h4><i class="fas fa-star"></i> Ratings</h4>
                                <div id="profile-ratings" class="rating-stars">
                                    <span class="rating-score">0</span>
                                    <div class="stars-container">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <span class="rating-count">(0 reviews)</span>
                                </div>
                            </div>
                            <div class="overview-card">
                                <h4><i class="fas fa-briefcase"></i> Availability</h4>
                                <div id="profile-availability" class="availability">
                                    <span class="availability-status">Unknown</span>
                                </div>
                            </div>
                            <div class="overview-card">
                                <h4><i class="fas fa-map-marker-alt"></i> Location</h4>
                                <p id="profile-location">Loading location...</p>
                            </div>
                            <div class="overview-card">
                                <h4><i class="fas fa-clock"></i> Response Time</h4>
                                <p id="profile-response-time">Loading...</p>
                            </div>
                            <div class="overview-card">
                                <h4><i class="fas fa-language"></i> Languages</h4>
                                <ul id="profile-languages" class="skills-list">
                                    <li>Loading languages...</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Expertise Tab -->
                <div id="expertise" class="tab-pane">
                    <div class="expertise-container">
                        <div class="skills-section">
                            <h3>Skills</h3>
                            <div id="skills-container" class="skills-grid">
                                <!-- Skills will be added dynamically -->
                                <div class="skill-placeholder"></div>
                                <div class="skill-placeholder"></div>
                                <div class="skill-placeholder"></div>
                            </div>
                        </div>
                        
                        <div class="certifications-section">
                            <h3>Certifications</h3>
                            <div id="certifications-container" class="certifications-list">
                                <!-- Certifications will be added dynamically -->
                                <div class="cert-placeholder"></div>
                                <div class="cert-placeholder"></div>
                            </div>
                        </div>
                        
                        <div class="tools-section">
                            <h3>Tools &amp; Technologies</h3>
                            <div id="tools-container" class="tools-grid">
                                <!-- Tools will be added dynamically -->
                                <div class="tool-placeholder"></div>
                                <div class="tool-placeholder"></div>
                                <div class="tool-placeholder"></div>
                                <div class="tool-placeholder"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Experience Tab -->
                <div id="experience" class="tab-pane">
                    <div class="experience-container">
                        <div class="work-experience">
                            <h3>Work Experience</h3>
                            <div id="work-experience-timeline" class="timeline">
                                <!-- Work experience will be added dynamically -->
                                <div class="timeline-placeholder"></div>
                                <div class="timeline-placeholder"></div>
                            </div>
                        </div>
                        
                        <div class="projects-section">
                            <h3>Projects</h3>
                            <div id="projects-container" class="projects-grid">
                                <!-- Projects will be added dynamically -->
                                <div class="project-placeholder"></div>
                                <div class="project-placeholder"></div>
                            </div>
                        </div>
                        
                        <div class="education-section">
                            <h3>Education</h3>
                            <div id="education-container" class="education-timeline">
                                <!-- Education will be added dynamically -->
                                <div class="education-placeholder"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Smart Contracts Tab -->
                <div id="contracts" class="tab-pane">
                    <div class="contracts-explanation">
                        <h3>Available Smart Contracts</h3>
                        <p>These smart contracts represent the professional services offered. Scan the QR code or download the offer file to engage this professional's services through the Chia blockchain.</p>
                    </div>
                    
                    <div id="contracts-container" class="contracts-grid">
                        <!-- Contract cards will be added dynamically -->
                        <div class="contract-placeholder"></div>
                        <div class="contract-placeholder"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Offer Uploader Section -->
    <section class="offer-uploader parallax-section">
        <div class="parallax-bg" style="background-image: url('images/contracts-bg.jpg');"></div>
        <div class="container">
            <div class="section-header light">
                <h2>Submit an offer of employment</h2>
                <div class="separator"></div>
            </div>
            <div class="uploader-container">
                <p>Upload a Chia offer file or paste an offer URL to submit your employment offer. Offers expire in 30 days.</p>
                
                <div class="upload-options">
                    <div class="file-upload">
                        <label for="offer-file" class="btn btn-secondary">
                            <i class="fas fa-file-upload"></i> Upload Offer File
                        </label>
                        <input type="file" id="offer-file" accept=".offer" hidden>
                        <span id="file-name">No file selected</span>
                    </div>
                    
                    <div class="or-divider">
                        <span>OR</span>
                    </div>
                    
                    <div class="offer-paste">
                        <input type="text" id="offer-url" placeholder="Paste Chia offer URL or text">
                        <button id="parse-offer-btn" class="btn btn-primary">Load Profile</button>
                    </div>
                </div>
                
                <div id="upload-error" class="upload-error"></div>
                
                <!-- Offer confirmation section (hidden by default) -->
                <div id="offer-confirmation" class="offer-confirmation" style="display: none;">
                    <div class="confirmation-header">
                        <h3>Confirm Employment Offer</h3>
                        <p>Please review the details of your employment offer before submitting:</p>
                    </div>
                    <div class="offer-details">
                        <div class="offer-detail">
                            <span class="detail-label">Position:</span>
                            <span id="offer-position" class="detail-value">-</span>
                        </div>
                        <div class="offer-detail">
                            <span class="detail-label">Rate:</span>
                            <span id="offer-rate" class="detail-value">-</span>
                        </div>
                        <div class="offer-detail">
                            <span class="detail-label">Minimum Term:</span>
                            <span id="offer-term" class="detail-value">-</span>
                        </div>
                        <div class="offer-detail">
                            <span class="detail-label">Skills Required:</span>
                            <div id="offer-skills" class="detail-value skills-tags">-</div>
                        </div>
                        <div class="offer-detail">
                            <span class="detail-label">Expiration:</span>
                            <span id="offer-expiration" class="detail-value">30 days from today</span>
                        </div>
                    </div>
                    <div class="confirmation-actions">
                        <button id="submit-offer-btn" class="btn btn-primary">Submit Offer</button>
                        <button id="cancel-offer-btn" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="images/lochness-logo-white.svg" alt="Lochness Group Logo">
                    <span>Lochness Group</span>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Company</h4>
                        <a href="index.html#about">About Us</a>
                        <a href="#">Team</a>
                        <a href="#">Careers</a>
                        <a href="#">Press</a>
                    </div>
                    <div class="footer-column">
                        <h4>Services</h4>
                        <a href="index.html#services">Farm Monitoring</a>
                        <a href="index.html#services">Chialisp Security</a>
                        <a href="index.html#services">Farming Analytics</a>
                        <a href="index.html#services">Smart Contract Development</a>
                    </div>
                    <div class="footer-column">
                        <h4>Resources</h4>
                        <a href="#">Blog</a>
                        <a href="#">Whitepapers</a>
                        <a href="#">Documentation</a>
                        <a href="#">API</a>
                    </div>
                    <div class="footer-column">
                        <h4>Legal</h4>
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Cookie Policy</a>
                        <a href="#">GDPR</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Lochness Group. All rights reserved.</p>
                <div class="footer-social">
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#"><i class="fab fa-github"></i></a>
                    <a href="#"><i class="fab fa-discord"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Verification Modal -->
    <div id="verification-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-shield-alt"></i> Credential Verification</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="verification-steps">
                    <div class="verification-step" data-step="connecting">
                        <div class="step-icon">
                            <i class="fas fa-plug"></i>
                        </div>
                        <div class="step-content">
                            <h3>Connecting to Chia Blockchain</h3>
                            <div class="step-status">
                                <div class="loading-spinner"></div>
                                <span class="status-text">Establishing connection...</span>
                            </div>
                        </div>
                    </div>
                    <div class="verification-step" data-step="did">
                        <div class="step-icon">
                            <i class="fas fa-id-card"></i>
                        </div>
                        <div class="step-content">
                            <h3>Verifying Decentralized Identity (DID)</h3>
                            <div class="step-status">
                                <div class="loading-spinner"></div>
                                <span class="status-text">Waiting to verify...</span>
                            </div>
                        </div>
                    </div>
                    <div class="verification-step" data-step="credentials">
                        <div class="step-icon">
                            <i class="fas fa-certificate"></i>
                        </div>
                        <div class="step-content">
                            <h3>Validating Credentials</h3>
                            <div class="step-status">
                                <div class="loading-spinner"></div>
                                <span class="status-text">Waiting to validate...</span>
                            </div>
                        </div>
                    </div>
                    <div class="verification-step" data-step="integrity">
                        <div class="step-icon">
                            <i class="fas fa-check-double"></i>
                        </div>
                        <div class="step-content">
                            <h3>Checking Credential Integrity</h3>
                            <div class="step-status">
                                <div class="loading-spinner"></div>
                                <span class="status-text">Waiting to check...</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="verification-result" style="display: none;">
                    <div class="result-icon">
                        <i class="fas fa-check-circle success-icon"></i>
                        <i class="fas fa-times-circle error-icon" style="display: none;"></i>
                    </div>
                    <div class="result-content">
                        <h3 class="result-title">Verification Complete</h3>
                        <p class="result-message">All credentials verified successfully!</p>
                        
                        <div class="credential-details">
                            <h4>Credential Information</h4>
                            <div class="credential-item">
                                <span class="credential-label">Issuer:</span>
                                <span id="credential-issuer" class="credential-value">Chia Network</span>
                            </div>
                            <div class="credential-item">
                                <span class="credential-label">Issued Date:</span>
                                <span id="credential-date" class="credential-value">March 15, 2023</span>
                            </div>
                            <div class="credential-item">
                                <span class="credential-label">Blockchain Confirmation:</span>
                                <span id="credential-confirmation" class="credential-value">Confirmed on block 1234567</span>
                            </div>
                            <div class="credential-item">
                                <span class="credential-label">Signature Status:</span>
                                <span id="credential-signature" class="credential-value valid">Valid</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="verification-close-btn" class="btn btn-primary">Close</button>
                <a id="verification-explorer-link" href="#" target="_blank" class="btn btn-secondary">
                    <i class="fas fa-external-link-alt"></i> View on Blockchain Explorer
                </a>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    
    <!-- Error handlers for scripts -->
    <script>
        // Handle script loading errors
        window.addEventListener('error', function(e) {
            if (e.target && (e.target.tagName === 'SCRIPT' || e.target.tagName === 'IMG')) {
                console.warn('Resource loading error:', e.target.src);
            }
        }, true);
        
        // Define QRCode globally before other scripts load
        window.QRCode = window.QRCode || function(element, options) {
            console.log('Using QRCode polyfill');
            const img = document.createElement('img');
            
            // Default to our placeholder instead of external service which might fail
            img.src = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSI3IiBoZWlnaHQ9IjciPjwvcmVjdD48cmVjdCB4PSIxNCIgeT0iMyIgd2lkdGg9IjciIGhlaWdodD0iNyI+PC9yZWN0PjxyZWN0IHg9IjMiIHk9IjE0IiB3aWR0aD0iNyIgaGVpZ2h0PSI3Ij48L3JlY3Q+PHJlY3QgeD0iMTQiIHk9IjE0IiB3aWR0aD0iMyIgaGVpZ2h0PSIzIj48L3JlY3Q+PHJlY3QgeD0iMTgiIHk9IjE0IiB3aWR0aD0iMyIgaGVpZ2h0PSIzIj48L3JlY3Q+PHJlY3QgeD0iMTQiIHk9IjE4IiB3aWR0aD0iMyIgaGVpZ2h0PSIzIj48L3JlY3Q+PHJlY3QgeD0iMTgiIHk9IjE4IiB3aWR0aD0iMyIgaGVpZ2h0PSIzIj48L3JlY3Q+PC9zdmc+';
            img.alt = 'QR Code';
            img.width = options.width || 200;
            img.height = options.height || 200;
            
            // Add text overlay
            const wrapper = document.createElement('div');
            wrapper.style.position = 'relative';
            wrapper.style.width = `${img.width}px`;
            wrapper.style.height = `${img.height}px`;
            
            const overlay = document.createElement('div');
            overlay.style.position = 'absolute';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.display = 'flex';
            overlay.style.alignItems = 'center';
            overlay.style.justifyContent = 'center';
            overlay.style.color = '#555';
            overlay.style.backgroundColor = 'rgba(255,255,255,0.7)';
            overlay.style.textAlign = 'center';
            overlay.style.padding = '5px';
            overlay.style.fontSize = '12px';
            overlay.innerHTML = 'Sample QR Code<br>(For demonstration)';
            
            wrapper.appendChild(img);
            wrapper.appendChild(overlay);
            
            if (typeof element === 'string') {
                element = document.getElementById(element);
            }
            
            if (element) {
                element.innerHTML = '';
                element.appendChild(wrapper);
            } else {
                console.warn('QRCode target element not found');
            }
        };
        
        // Add the CorrectLevel property to match the library API
        window.QRCode.CorrectLevel = { L: 1, M: 0, Q: 3, H: 2 };
        
        // Error handler for missing elements
        document.addEventListener('DOMContentLoaded', function() {
            // Create global error handler function
            window.handleMissingElement = function(id, fallbackAction) {
                const element = document.getElementById(id);
                if (!element) {
                    console.warn(`Element #${id} not found`);
                    if (typeof fallbackAction === 'function') {
                        fallbackAction();
                    }
                    return null;
                }
                return element;
            };
        });
    </script>
    
    <!-- Application Scripts -->
    <script src="js/placeholders.js"></script>
    <script src="js/profile-image-generator.js"></script>
    <script src="js/main.js"></script>
    <script src="js/contracts.js"></script>
    <script src="js/profile.js"></script>
</body>
</html>
